# v0.1 Release Preparation & GitHub Setup Implementation Plan

> **For Claude:** Use skills/collaboration/executing-plans to implement this plan task-by-task.

**Goal:** Prepare the 2389-agent-rust project for v0.1 release by cleaning up experimental files, adding essential project files (licenses, contributing guide), initializing git properly, creating the GitHub repository at `2389-research/2389-agent-rust`, and setting up minimal CI/CD.

**Architecture:** This is a release engineering task focused on repository hygiene and automation infrastructure. We'll ship v1.0 protocol features only (mark dynamic routing as experimental), add essential open-source project files, initialize git with proper history, push to GitHub, and configure GitHub Actions for minimal CI (tests + clippy).

**Tech Stack:** Git, GitHub CLI (`gh`), GitHub Actions, Rust toolchain (cargo), Markdown

---

## Task 1: Clean Up Experimental and Debug Files

**Files:**
- Delete: `debug_test` (binary)
- Delete: `debug_test.rs` (debug script)
- Review: `.gitignore` to ensure debug artifacts are excluded

**Step 1: Remove debug files**

```bash
rm debug_test debug_test.rs
```

**Step 2: Verify .gitignore includes debug patterns**

Check that `.gitignore` contains:
```
debug_test
debug_test.*
target/
*.log
```

If missing, add them.

**Step 3: Verify no other debug/temp files exist**

```bash
find . -name "*.tmp" -o -name "*.bak" -o -name "*~" | grep -v target
```

Expected: Empty output or only legitimate files

**Step 4: Commit cleanup**

```bash
git add -A
git commit -m "chore: remove debug and experimental files for v0.1"
```

---

## Task 2: Add License Files

**Files:**
- Create: `LICENSE-MIT`
- Create: `LICENSE-APACHE`

**Step 1: Create MIT license**

Create `LICENSE-MIT` with standard MIT license text:

```
MIT License

Copyright (c) 2024 2389 Research

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

**Step 2: Create Apache 2.0 license**

Create `LICENSE-APACHE` with standard Apache 2.0 license text (fetch from https://www.apache.org/licenses/LICENSE-2.0.txt or use template).

**Step 3: Verify Cargo.toml has license field**

Check `Cargo.toml` contains:
```toml
license = "MIT OR Apache-2.0"
```

If missing, add it to the `[package]` section.

**Step 4: Commit licenses**

```bash
git add LICENSE-MIT LICENSE-APACHE Cargo.toml
git commit -m "chore: add MIT and Apache-2.0 dual license"
```

---

## Task 3: Create CONTRIBUTING.md

**Files:**
- Create: `CONTRIBUTING.md`

**Step 1: Write contributing guide**

Create `CONTRIBUTING.md`:

```markdown
# Contributing to 2389 Agent Protocol (Rust)

Thank you for your interest in contributing! This document provides guidelines for contributing to this project.

## Development Setup

### Prerequisites

- Rust 1.75 or later
- MQTT broker (Mosquitto recommended)
- Git

### Getting Started

1. Fork the repository
2. Clone your fork: `git clone https://github.com/YOUR_USERNAME/2389-agent-rust`
3. Create a feature branch: `git checkout -b feature/my-feature`
4. Make your changes
5. Run tests: `cargo test`
6. Submit a pull request

## Development Workflow

### Code Quality

Before submitting, ensure your code passes all quality gates:

```bash
# Format code
cargo fmt

# Lint
cargo clippy --all-targets -- -D warnings

# Run tests
cargo test
```

### Testing

- Write tests for all new functionality
- Maintain â‰¥80% test coverage
- Run `cargo test` before committing
- Integration tests require Docker for MQTT broker

### Commit Messages

Use conventional commit format:
- `feat:` - New features
- `fix:` - Bug fixes
- `docs:` - Documentation changes
- `test:` - Test additions/changes
- `chore:` - Maintenance tasks
- `refactor:` - Code refactoring

Example: `feat: add support for custom tool parameters`

## Code Style

- Follow existing code patterns
- Use `cargo fmt` for formatting
- Address all `cargo clippy` warnings
- Document public APIs with rustdoc comments
- Include examples in documentation

## Pull Request Process

1. Update documentation for any new features
2. Add tests for bug fixes and new features
3. Ensure all tests pass locally
4. Update README.md if needed
5. Request review from maintainers

## Testing Standards

- Unit tests for all modules
- Integration tests for MQTT communication
- Property-based tests for protocol edge cases
- All tests must pass before merging

## Questions?

- Open an issue for bugs or feature requests
- Use discussions for questions
- Check existing issues before creating new ones

## License

By contributing, you agree that your contributions will be licensed under the same MIT OR Apache-2.0 dual license as the project.
```

**Step 2: Commit contributing guide**

```bash
git add CONTRIBUTING.md
git commit -m "docs: add contributing guidelines"
```

---

## Task 4: Update README.md for v0.1

**Files:**
- Modify: `README.md`

**Step 1: Update repository URLs**

Replace all instances of:
- `https://github.com/example/2389-agent-rust` â†’ `https://github.com/2389-research/2389-agent-rust`
- `example/2389-agent-rust` â†’ `2389-research/2389-agent-rust`

**Step 2: Update current status section**

Change the status section to reflect v0.1:

```markdown
**Current Status: v0.1.0**
- âœ… Core protocol (v1.0) fully implemented and tested
- âœ… 9-step task processing algorithm complete
- âœ… MQTT transport with QoS 1 messaging
- âœ… Agent discovery system with capability matching
- ðŸš§ Dynamic routing (v2.0) - Experimental (see [DYNAMIC_ROUTING_ANALYSIS.md](DYNAMIC_ROUTING_ANALYSIS.md))
- âœ… 286 tests passing (213 unit + 64 integration + 9 doc)
```

**Step 3: Add v0.1 release notes section**

Add before "Overview" section:

```markdown
## v0.1.0 Release Notes

This is the initial release of the 2389 Agent Protocol Rust implementation.

**What's Included:**
- Complete v1.0 protocol implementation with all required message types
- Production-ready agent runtime with lifecycle management
- MQTT transport layer with QoS 1 and proper error handling
- Tool system with JSON schema validation
- Multi-LLM provider support (OpenAI, Anthropic)
- Comprehensive test suite (286 tests)
- Docker deployment support

**What's Experimental:**
- Dynamic routing (v2.0) features - 80% complete, marked as experimental
- See DYNAMIC_ROUTING_ANALYSIS.md for current implementation status

**Known Limitations:**
- Dynamic routing capability matching needs additional testing
- Hot-reload configuration not yet implemented
- Prometheus metrics export in development
```

**Step 4: Commit README updates**

```bash
git add README.md
git commit -m "docs: update README for v0.1 release"
```

---

## Task 5: Update Cargo.toml for v0.1

**Files:**
- Modify: `Cargo.toml`

**Step 1: Set version to 0.1.0**

Ensure `Cargo.toml` has:
```toml
[package]
name = "agent2389"
version = "0.1.0"
edition = "2021"
rust-version = "1.75"
license = "MIT OR Apache-2.0"
description = "Production-ready implementation of the 2389 Agent Protocol in Rust"
homepage = "https://github.com/2389-research/2389-agent-rust"
repository = "https://github.com/2389-research/2389-agent-rust"
keywords = ["agent", "mqtt", "llm", "ai", "protocol"]
categories = ["network-programming", "asynchronous"]
readme = "README.md"
```

**Step 2: Verify all fields are present**

Check that repository, homepage, description, keywords, and categories are all set correctly.

**Step 3: Commit Cargo.toml updates**

```bash
git add Cargo.toml
git commit -m "chore: prepare Cargo.toml for v0.1.0 release"
```

---

## Task 6: Initialize Git Repository

**Files:**
- Initialize: `.git/` (if not already initialized)
- Verify: `.gitignore` is complete

**Step 1: Check if git is initialized**

```bash
git status
```

If "not a git repository", run:
```bash
git init
git branch -M main
```

**Step 2: Verify .gitignore is comprehensive**

Ensure `.gitignore` contains:
```
# Rust
target/
Cargo.lock
*.pdb

# IDEs
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Logs
*.log

# Test artifacts
coverage/

# Debug files
debug_test
debug_test.*
```

**Step 3: Add all files and create initial commit**

```bash
git add .
git commit -m "chore: initial commit for v0.1.0 release"
```

Expected: All project files committed

**Step 4: Tag the v0.1.0 release**

```bash
git tag -a v0.1.0 -m "Release v0.1.0 - Initial public release"
```

---

## Task 7: Create GitHub Repository

**Files:**
- N/A (GitHub operations)

**Step 1: Verify gh CLI is authenticated**

```bash
gh auth status
```

Expected: Shows authenticated user

If not authenticated:
```bash
gh auth login
```

**Step 2: Create repository on GitHub**

```bash
gh repo create 2389-research/2389-agent-rust \
  --public \
  --description "Production-ready implementation of the 2389 Agent Protocol in Rust" \
  --homepage "https://github.com/2389-research/2389-agent-rust"
```

Expected: Repository created successfully

**Step 3: Add GitHub remote**

```bash
git remote add origin https://github.com/2389-research/2389-agent-rust.git
```

**Step 4: Push code and tags to GitHub**

```bash
git push -u origin main
git push origin v0.1.0
```

Expected: All commits and tags pushed successfully

---

## Task 8: Create GitHub Actions CI Workflow

**Files:**
- Create: `.github/workflows/ci.yml`

**Step 1: Create workflows directory**

```bash
mkdir -p .github/workflows
```

**Step 2: Create minimal CI workflow**

Create `.github/workflows/ci.yml`:

```yaml
name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

env:
  RUST_BACKTRACE: 1
  CARGO_TERM_COLOR: always

jobs:
  test:
    name: Test
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Rust
      uses: dtolnay/rust-toolchain@stable

    - name: Cache cargo registry
      uses: actions/cache@v3
      with:
        path: ~/.cargo/registry
        key: ${{ runner.os }}-cargo-registry-${{ hashFiles('**/Cargo.lock') }}

    - name: Cache cargo index
      uses: actions/cache@v3
      with:
        path: ~/.cargo/git
        key: ${{ runner.os }}-cargo-index-${{ hashFiles('**/Cargo.lock') }}

    - name: Cache target directory
      uses: actions/cache@v3
      with:
        path: target
        key: ${{ runner.os }}-target-${{ hashFiles('**/Cargo.lock') }}

    - name: Run tests
      run: cargo test --all-features --verbose

  clippy:
    name: Clippy
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Rust
      uses: dtolnay/rust-toolchain@stable
      with:
        components: clippy

    - name: Cache cargo
      uses: actions/cache@v3
      with:
        path: |
          ~/.cargo/registry
          ~/.cargo/git
          target
        key: ${{ runner.os }}-cargo-clippy-${{ hashFiles('**/Cargo.lock') }}

    - name: Run clippy
      run: cargo clippy --all-targets --all-features -- -D warnings

  format:
    name: Format
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Rust
      uses: dtolnay/rust-toolchain@stable
      with:
        components: rustfmt

    - name: Check formatting
      run: cargo fmt --all -- --check
```

**Step 3: Commit workflow**

```bash
git add .github/workflows/ci.yml
git commit -m "ci: add GitHub Actions workflow for tests and clippy"
```

**Step 4: Push workflow to GitHub**

```bash
git push origin main
```

**Step 5: Verify CI runs**

Visit: https://github.com/2389-research/2389-agent-rust/actions

Expected: CI workflow runs and passes

---

## Task 9: Create Release on GitHub

**Files:**
- N/A (GitHub operations)

**Step 1: Create release from tag**

```bash
gh release create v0.1.0 \
  --title "v0.1.0 - Initial Public Release" \
  --notes "## v0.1.0 Release Notes

This is the initial release of the 2389 Agent Protocol Rust implementation.

### What's Included
- Complete v1.0 protocol implementation with all required message types
- Production-ready agent runtime with lifecycle management
- MQTT transport layer with QoS 1 and proper error handling
- Tool system with JSON schema validation
- Multi-LLM provider support (OpenAI, Anthropic)
- Comprehensive test suite (286 tests)
- Docker deployment support

### What's Experimental
- Dynamic routing (v2.0) features - 80% complete, marked as experimental
- See DYNAMIC_ROUTING_ANALYSIS.md for current implementation status

### Known Limitations
- Dynamic routing capability matching needs additional testing
- Hot-reload configuration not yet implemented
- Prometheus metrics export in development

### Installation

\`\`\`bash
cargo install --git https://github.com/2389-research/2389-agent-rust --tag v0.1.0
\`\`\`

See [README.md](https://github.com/2389-research/2389-agent-rust#readme) for complete documentation."
```

**Step 2: Verify release created**

```bash
gh release view v0.1.0
```

Expected: Release details displayed

---

## Task 10: Update Repository Settings

**Files:**
- N/A (GitHub UI operations)

**Step 1: Enable branch protection**

Using GitHub web UI or `gh` CLI:
```bash
gh api repos/2389-research/2389-agent-rust/branches/main/protection \
  --method PUT \
  --field required_status_checks='{"strict":true,"contexts":["test","clippy","format"]}' \
  --field enforce_admins=false \
  --field required_pull_request_reviews=null \
  --field restrictions=null
```

**Step 2: Add repository topics**

```bash
gh repo edit 2389-research/2389-agent-rust \
  --add-topic rust \
  --add-topic mqtt \
  --add-topic agent \
  --add-topic llm \
  --add-topic ai \
  --add-topic protocol
```

**Step 3: Enable GitHub Discussions (optional)**

```bash
gh repo edit 2389-research/2389-agent-rust --enable-discussions
```

**Step 4: Verify settings**

Visit: https://github.com/2389-research/2389-agent-rust/settings

Check:
- [x] Issues enabled
- [x] Branch protection on main
- [x] Actions enabled
- [x] Topics added

---

## Task 11: Final Verification

**Files:**
- N/A (verification steps)

**Step 1: Clone fresh copy and test**

```bash
cd /tmp
git clone https://github.com/2389-research/2389-agent-rust.git
cd 2389-agent-rust
cargo test
```

Expected: All tests pass

**Step 2: Verify CI status**

```bash
gh run list --repo 2389-research/2389-agent-rust
```

Expected: Latest run shows success âœ“

**Step 3: Check release page**

Visit: https://github.com/2389-research/2389-agent-rust/releases/tag/v0.1.0

Verify:
- [x] Release notes are visible
- [x] Tag is correct
- [x] Installation instructions work

**Step 4: Test installation from GitHub**

```bash
cargo install --git https://github.com/2389-research/2389-agent-rust --tag v0.1.0
```

Expected: Builds and installs successfully

---

## Post-Release Tasks (Optional)

### Announce Release

1. Post to social media (Twitter, Reddit, etc.)
2. Update any project documentation sites
3. Notify collaborators

### Monitor CI

1. Watch first few CI runs for issues
2. Fix any platform-specific problems
3. Iterate on workflow if needed

### Plan v0.2

1. Review DYNAMIC_ROUTING_ANALYSIS.md
2. Create milestones for completing dynamic routing
3. Document roadmap in GitHub discussions

---

## Success Criteria

- [x] Debug files removed
- [x] Licenses added (MIT + Apache-2.0)
- [x] CONTRIBUTING.md created
- [x] README updated for v0.1
- [x] Cargo.toml configured for release
- [x] Git repository initialized with proper history
- [x] GitHub repository created at 2389-research/2389-agent-rust
- [x] Code pushed to GitHub
- [x] CI workflow passing on GitHub Actions
- [x] v0.1.0 release published on GitHub
- [x] Repository settings configured
- [x] Fresh clone builds and tests successfully
